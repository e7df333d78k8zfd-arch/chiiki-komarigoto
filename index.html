<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åœ°åŸŸã®å›°ã‚Šã”ã¨æŠ•ç¨¿</title>

<style>
body {
  font-family: sans-serif;
  background: #f3f4f6;
  margin: 0;
  padding: 16px;
}

h1 {
  text-align: center;
}

input, select, textarea, button {
  width: 100%;
  margin-bottom: 12px;
  padding: 8px;
  font-size: 16px;
}

button {
  border: none;
  border-radius: 6px;
}

#submitBtn {
  background: #4f46e5;
  color: white;
}

#listBtn {
  background: #10b981;
  color: white;
}
</style>
</head>
<body>

<h1>åœ°åŸŸã®å›°ã‚Šã”ã¨æŠ•ç¨¿</h1>

<input id="title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«">
<input id="location" placeholder="åœ°åŸŸãƒ»å ´æ‰€">

<select id="category">
  <option value="é«˜é½¢è€…">é«˜é½¢è€…</option>
  <option value="å­è‚²ã¦">å­è‚²ã¦</option>
  <option value="éšœå®³">éšœå®³</option>
  <option value="ç”Ÿæ´»å›°çª®">ç”Ÿæ´»å›°çª®</option>
</select>

<textarea id="content" rows="5" placeholder="å›°ã£ã¦ã„ã‚‹å†…å®¹"></textarea>

<button id="submitBtn">æŠ•ç¨¿</button>
<button id="listBtn">ä¸€è¦§ã‚’è¦‹ã‚‹</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCuA1iGo0nHN7w4tuv6LaQ34I41Yp0EXbE",
  authDomain: "chiiki-komarigoto.firebaseapp.com",
  projectId: "chiiki-komarigoto",
  storageBucket: "chiiki-komarigoto.firebasestorage.app",
  messagingSenderId: "278691153990",
  appId: "1:278691153990:web:3dbc7a67c2959a9a726247"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("submitBtn").onclick = async () => {
  const title = document.getElementById("title")?.value || "";
  const location = document.getElementById("location")?.value || "";
  const category = document.getElementById("category")?.value || "";
  const content = document.getElementById("content")?.value || "";

  if (!title || !location || !content) {
    alert("æœªå…¥åŠ›ã®é …ç›®ãŒã‚ã‚Šã¾ã™");
    return;
  }

  await addDoc(collection(db, "issues"), {
    title,
    location,
    category,
    content,
    createdAt: serverTimestamp()
  });

  alert("æŠ•ç¨¿ã—ã¾ã—ãŸï¼");
};

// ğŸ‘‰ ä¸€è¦§ãƒšãƒ¼ã‚¸ã¸ç§»å‹•
document.getElementById("listBtn").onclick = () => {
  location.href = "list.html";
};
</script>

</body>
</html>
